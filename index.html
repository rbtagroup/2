<!DOCTYPE html>

<html lang="cs">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="#FFD700" name="theme-color"/>
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/>
<title>RB TAXI – Výčetka</title>
<link href="manifest.json" rel="manifest"/>
<link href="style.css?v=10.7.3" rel="stylesheet"/>
<link href="icon-192.png" rel="icon"/>
<link href="apple-touch-icon.png" rel="apple-touch-icon"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&amp;family=Plus+Jakarta+Sans:wght@600;800&amp;display=swap" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script defer="" src="app.js?v=10.7.3"></script>
<script>
    if ('serviceWorker' in navigator){
      window.addEventListener('load', ()=>{
        navigator.serviceWorker.register('service-worker.js').then(reg=>{
          if (reg.waiting){ showUpdate(); }
          reg.addEventListener('updatefound', ()=>{
            const nw = reg.installing;
            nw.addEventListener('statechange', ()=>{
              if (nw.state==='installed' && navigator.serviceWorker.controller){ showUpdate(); }
            });
          });
        });
      });
      function showUpdate(){
        const bar = document.createElement('div');
        bar.id='swUpdatedToast';
        bar.textContent='K dispozici je nová verze. Klepněte pro obnovení.';
        bar.style.cssText='position:fixed;left:12px;right:12px;bottom:12px;padding:12px 16px;border-radius:12px;background:#111;color:#fff;text-align:center;z-index:9999;box-shadow:0 10px 20px rgba(0,0,0,.3);';
        bar.onclick=()=>{ navigator.serviceWorker.getRegistration().then(r=>{ r.waiting && r.waiting.postMessage({type:"SKIP_WAITING"}); location.reload(); }); };
        document.body.appendChild(bar);
      }
      navigator.serviceWorker.addEventListener('message', (e)=>{
        if (e.data && e.data.type==='RELOAD'){ location.reload(); }
      });
    }
  </script>
</head>
<body>
<header>
<div class="appbar">
<div class="brand">
<img alt="RB TAXI" class="brand-icon" src="icon-192.png"/>
<div class="brand-text">
<div class="brand-title">Výčetka řidiče</div>
<div class="brand-subtitle">RB TAXI • v10.7.3 MOBILE ONE</div>
</div>
</div>
<div class="mode-group">
<button aria-label="Přepnout režim" class="toggle" id="themeToggle" title="Přepnout režim">🌙</button>
<select aria-label="Režim vzhledu" id="themeMode">
<option value="auto">Auto</option>
<option value="light">Světlý</option>
<option value="dark">Tmavý</option>
</select>
</div>
</div>
</header>
<div class="offline hidden" id="offlineBanner">Jste offline – změny a výstupy budou dočasně uloženy lokálně.</div>
<main class="layout">
<form id="calcForm">
<label>👤 Řidič: <input id="driverName" placeholder="Jméno řidiče" required="" type="text"/></label>
<label>🕒 Typ směny:
        <select id="shiftType">
<option value="den">Denní</option>
<option value="noc">Noční</option>
<option value="odpo">Odpolední</option>
<option value="pul">1/2 směna</option>
</select>
</label>
<label>🚗 Kilometry: <input id="km" inputmode="decimal" required="" type="number"/></label>
<label>💰 Tržba: <input id="trzba" inputmode="decimal" required="" type="number"/></label>
<label>🏁 Přístavné: <input id="pristavne" inputmode="decimal" type="number"/></label>
<label>⛽ Palivo: <input id="palivo" inputmode="decimal" type="number"/></label>
<label>🧽 Mytí: <input id="myti" inputmode="decimal" type="number"/></label>
<label>💳 Kartou: <input id="kartou" inputmode="decimal" type="number"/></label>
<label>🧾 Fakturou: <input id="fakturou" inputmode="decimal" type="number"/></label>
<label>📦 Jiné: <input id="jine" inputmode="decimal" type="number"/></label>
<div class="form-actions">
<button type="submit">📊 Vypočítat</button>
<button id="resetBtn" type="button">🔄 Reset</button>
</div>
</form>
<section class="hidden" id="output"></section>
<div class="hidden" id="actions">
<button id="pdfExport" type="button">📄 Export do PDF</button>
<button id="shareBtn" type="button">📌 Sdílet</button>
<button id="newShiftBtn" type="button">🔁 Nová směna</button>
</div>
<section class="hidden" id="history"></section>


</main>
</body>
</html>